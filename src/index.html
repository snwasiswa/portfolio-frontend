<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>PortfolioFrontend</title>
  <base href="/">
  <!-- PrimeNG theme -->
  <!-- In index.html head -->
  <link id="app-theme" rel="stylesheet" href="assets/themes/lara-light-blue/theme.css" />

  <!-- PrimeNG core -->
  <link rel="stylesheet" href="https://unpkg.com/primeng/resources/primeng.min.css" />

  <!-- PrimeIcons -->
  <link rel="stylesheet" href="https://unpkg.com/primeicons/primeicons.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- Google reCAPTCHA script -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>
  <!-- Video Background -->
  <video autoplay muted loop playsinline preload="auto" id="bg-video">
    Your browser does not support the video tag.
    <source src="videos/background.mp4" type="video/mp4" />
  </video>

  <div class="page-container"></div>

  <!-- Angular Root -->
  <app-root></app-root>

</body>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
<script>
  window.addEventListener('DOMContentLoaded', () => {
    const video = document.getElementById('bg-video');
    const audio = document.getElementById('intro-audio');

    // Initialize flag to track if audio played
    audio.isPlaying = false;

    // Play background video
    if (video) {
      const playPromise = video.play();
      if (playPromise !== undefined) {
        playPromise.catch((error) => {
          console.warn('Autoplay failed, trying to mute and play:', error);
          video.muted = true;
          video.play();
        });
      }
    }

    // Wait for user interaction to play audio (due to browser policies)
    const playAudioOnce = () => {
      if (audio && audio.paused && !audio.isPlaying) {
        audio.play().then(() => {
          audio.isPlaying = true;  // Mark audio as playing
        }).catch(err => {
          console.warn("Audio play blocked:", err);
        });
      }
      // Remove listeners after first interaction
      window.removeEventListener('click', playAudioOnce);
      window.removeEventListener('keydown', playAudioOnce);
    };

    window.addEventListener('click', playAudioOnce);
    window.addEventListener('keydown', playAudioOnce);
  });
</script>

</html>
