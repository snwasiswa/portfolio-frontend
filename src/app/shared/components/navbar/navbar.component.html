<!-- DESKTOP NAVIGATION -->
<div class="sticky-header desktop-only">
  <p-menubar [model]="menuItems">
    <!-- Logo -->
    <ng-template pTemplate="start">
      <div class="logo-initials animated-logo" (click)="scrollTo('home')">
        <span class="logo-text">SW</span>
        <div class="logo-dots">
          <div class="dot dot1"></div>
          <div class="dot dot2"></div>
          <div class="dot dot3"></div>
        </div>
      </div>
    </ng-template>

    <!-- Menu Items -->
    <ng-template pTemplate="menuitem" let-item>
      <a
        (click)="item.command?.({ originalEvent: $event, item: item })"
        [ngClass]="{ 'active-link': item.label?.toLowerCase() === activeSection }">
        <i *ngIf="item.icon" [class]="item.icon"></i>
        <span>{{ item.label }}</span>
      </a>
    </ng-template>

    <!-- Right Side: Preferences + Role Switch -->
    <ng-template pTemplate="end">
      <div class="p-menubar-end">
        <p-dropdown
          [options]="roleOptions"
          [(ngModel)]="selectedRole"
          (onChange)="onSwitchRole($event)"
          optionLabel="label"
          styleClass="switch-role-dropdown"
          [style]="{ width: '180px' }">
          <ng-template let-option pTemplate="selectedItem">
            <div class="dropdown-item">
              <i *ngIf="option.icon" class="pi" [ngClass]="option.icon" style="margin-right: 0.5rem;"></i>
              {{ option?.label }}
            </div>
          </ng-template>
          <ng-template let-option pTemplate="item">
            <div class="dropdown-item">
              <i *ngIf="option.icon" class="pi" [ngClass]="option.icon" style="margin-right: 0.5rem;"></i>
              {{ option.label }}
            </div>
          </ng-template>
        </p-dropdown>
      </div>
    </ng-template>
  </p-menubar>
</div>

<!-- MOBILE NAVIGATION -->
<div class="sticky-header mobile-only mobile-top-bar">
  <!-- Logo -->
  <div class="logo-initials animated-logo" (click)="scrollTo('home')">
    <span class="logo-text">SW</span>
    <div class="logo-dots">
      <div class="dot dot1"></div>
      <div class="dot dot2"></div>
      <div class="dot dot3"></div>
    </div>
  </div>

  <!-- Role Switch + Hamburger -->
  <div class="mobile-controls">
    <p-dropdown
      [options]="roleOptions"
      [(ngModel)]="selectedRole"
      (onChange)="onSwitchRole($event)"
      optionLabel="label"
      appendTo="body"
      styleClass="switch-role-dropdown mobile-role-dropdown"
      [style]="{ width: '120px' }">
      <ng-template let-option pTemplate="selectedItem">
        <div class="dropdown-item">
          <i *ngIf="option.icon" class="pi" [ngClass]="option.icon" style="margin-right: 0.5rem;"></i>
          {{ option?.label }}
        </div>
      </ng-template>
      <ng-template let-option pTemplate="item">
        <div class="dropdown-item">
          <i *ngIf="option.icon" class="pi" [ngClass]="option.icon" style="margin-right: 0.5rem;"></i>
          {{ option.label }}
        </div>
      </ng-template>
    </p-dropdown>

    <p-button icon="pi pi-bars" (onClick)="sidebarVisible = true" [ngClass]="{'hamburger-button': true, 'desktop-only': false}" class="custom-button hamburger-button"></p-button>
  </div>
</div>

<!-- MOBILE SIDEBAR -->
<p-sidebar [(visible)]="sidebarVisible" [modal]="true" position="left" class="mobile-only">
  <div class="sidebar-content">
    <div class="sidebar-logo logo-initials animated-logo" (click)="scrollTo('home'); sidebarVisible = false">
      <span class="logo-text">SW</span>
      <div class="logo-dots">
        <div class="dot dot1"></div>
        <div class="dot dot2"></div>
        <div class="dot dot3"></div>
      </div>
    </div>

    <div class="mobile-menu">
      <a *ngFor="let item of menuItems"
         (click)="item.command?.({ originalEvent: $event, item: item }); sidebarVisible = false"
         [ngClass]="{ 'active-link': item.label?.toLowerCase() === activeSection }">
        <i *ngIf="item.icon" [class]="item.icon"></i>
        {{ item.label }}
      </a>
    </div>
  </div>
</p-sidebar>
